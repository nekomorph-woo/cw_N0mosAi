# Validator Subagent æ¨¡å—è¯¦è§£

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**æœ€åæ›´æ–°**: 2026-02-27
**é€‚ç”¨ä»£ç **: `.claude/hooks/lib/validator_subagent.py`

---

## 1. æ¦‚è¿°

### 1.1 è®¾è®¡ç›®æ ‡

Validator Subagent æ˜¯ nOmOsAi ç³»ç»Ÿä¸­çš„**åŒé‡éªŒè¯æœºåˆ¶**ï¼Œå…¶æ ¸å¿ƒè®¾è®¡ç›®æ ‡æ˜¯ï¼š

1. **ä¸“é—¨æŒ‘åˆº** - ä»¥æ‰¹åˆ¤æ€§è§†è§’å®¡æŸ¥ Agent ç”Ÿæˆçš„æ–‡æ¡£
2. **å‘ç°å¹»è§‰** - æ£€æµ‹ AI å¯èƒ½äº§ç”Ÿçš„ç†è§£åå·®æˆ–è™šæ„å†…å®¹
3. **ä¿æŠ¤æ¥å£** - ç¡®ä¿ Protected Interfaces ä¸è¢«æ„å¤–ä¿®æ”¹
4. **è´¨é‡é—¨æ§** - ä¸ºé˜¶æ®µæµè½¬æä¾›éªŒè¯æ£€æŸ¥ç‚¹

### 1.2 éªŒè¯èŒƒå›´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Validator Subagent éªŒè¯èŒƒå›´                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   research.md       â”‚      â”‚     plan.md         â”‚              â”‚
â”‚  â”‚                     â”‚      â”‚                     â”‚              â”‚
â”‚  â”‚  - éœ€æ±‚ç†è§£         â”‚      â”‚  - ç›®æ ‡å®šä¹‰         â”‚              â”‚
â”‚  â”‚  - ä»£ç è°ƒç ”         â”‚      â”‚  - æ¶æ„è®¾è®¡         â”‚              â”‚
â”‚  â”‚  - Protected Intf   â”‚      â”‚  - Phase Gates      â”‚              â”‚
â”‚  â”‚  - Why Questions    â”‚      â”‚  - å®æ–½æ­¥éª¤         â”‚              â”‚
â”‚  â”‚  - æ ¼å¼è§„èŒƒ         â”‚      â”‚  - Review Comments  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚           â”‚                            â”‚                            â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                        â”‚                                            â”‚
â”‚                        â–¼                                            â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚              â”‚  Validation Issues  â”‚                                â”‚
â”‚              â”‚                     â”‚                                â”‚
â”‚              â”‚  - CRITICAL: é˜»å¡   â”‚                                â”‚
â”‚              â”‚  - MAJOR: é‡è¦é—®é¢˜  â”‚                                â”‚
â”‚              â”‚  - MINOR: è½»å¾®é—®é¢˜  â”‚                                â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 æ ¸å¿ƒèŒè´£

æ ¹æ®æ¶æ„æ–‡æ¡£ (03_System_Architecture.md:876-889)ï¼ŒValidator Subagent çš„èŒè´£åŒ…æ‹¬ï¼š

| èŒè´£ | è¯´æ˜ | å®ç°çŠ¶æ€ |
|------|------|---------|
| åªè¯»éªŒè¯ research.md | æ£€æŸ¥éœ€æ±‚ç†è§£ã€ä»£ç è°ƒç ”ã€Protected Interfaces | âœ… å·²å®ç° |
| åªè¯»éªŒè¯ plan.md | æ£€æŸ¥ç›®æ ‡ã€æ¶æ„è®¾è®¡ã€Phase Gates | âœ… å·²å®ç° |
| Protected Interfaces å†²çªæ£€æµ‹ | æ£€æŸ¥æ˜¯å¦ä¿®æ”¹äº†ä¸å¯å˜æ¥å£ | âš ï¸ åŸºç¡€å®ç° |
| æœªæåŠä¸šåŠ¡çº¦æŸå‘ç° | å‘ç°é—æ¼çš„ä¸šåŠ¡è§„åˆ™ | âŒ æœªå®ç° |
| é¢å¤–é—®é¢˜åˆ—è¡¨ç”Ÿæˆ | ç”Ÿæˆè¿½é—®é—®é¢˜ | âŒ æœªå®ç° |

---

## 2. ç³»ç»Ÿæ¶æ„è®¾è®¡

### 2.1 æ¶æ„ä½ç½®

Validator Subagent åœ¨ nOmOsAi æ¶æ„ä¸­çš„ä½ç½®ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·äº¤äº’å±‚                                      â”‚
â”‚  (Claude Code CLI / Task Viewer HTML ç•Œé¢)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SKILL ç¼–æ’å±‚                                    â”‚
â”‚  (/nomos ä¸» SKILL + å­ SKILL)                                       â”‚
â”‚  - /nomos:validate â†’ è§¦å‘ Validator Subagent                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Hooks é—¨æ§å±‚                                    â”‚
â”‚  - Stop Hook â†’ è‡ªåŠ¨è§¦å‘éªŒè¯                                          â”‚
â”‚  - PostToolUse â†’ æ£€æµ‹ä¸¥é‡é—®é¢˜                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Validator Subagent (æœ¬æ¨¡å—)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  validate_research()     â†’ éªŒè¯ research.md                   â”‚   â”‚
â”‚  â”‚  validate_plan()         â†’ éªŒè¯ plan.md                       â”‚   â”‚
â”‚  â”‚  validate_protected_intf() â†’ æ£€æŸ¥æ¥å£ä¿æŠ¤                     â”‚   â”‚
â”‚  â”‚  generate_checklist()    â†’ ç”Ÿæˆå®¡æŸ¥æ¸…å•                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      çŠ¶æ€æŒä¹…åŒ–å±‚                                    â”‚
â”‚  - Review Comments å†™å…¥ plan.md / research.md                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 è§¦å‘æ—¶æœº

æ ¹æ®æ¶æ„è®¾è®¡ (03_System_Architecture.md:886-889)ï¼š

| è§¦å‘ç‚¹ | è§¦å‘æ¡ä»¶ | æ‰§è¡Œæ–¹å¼ |
|--------|---------|---------|
| research.md ç”Ÿæˆå | è‡ªåŠ¨ spawn | Stop Hook è§¦å‘ |
| plan.md ç”Ÿæˆå | è‡ªåŠ¨ spawn | Stop Hook è§¦å‘ |
| äººç±»æ‰‹åŠ¨è§¦å‘ | `/nomos:validate` | SKILL è°ƒç”¨ |

### 2.3 ä¸å…¶ä»–æ¨¡å—çš„å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ¨¡å—åä½œå…³ç³»                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ Honest Questioning â”‚         â”‚  Validator        â”‚                â”‚
â”‚  â”‚ Engine            â”‚ â”€â”€â”€â”€â”€â”€â–º â”‚  Subagent         â”‚                â”‚
â”‚  â”‚                   â”‚  ç”Ÿæˆ    â”‚                   â”‚                â”‚
â”‚  â”‚  - æ£€æµ‹ç†è§£ç¨‹åº¦    â”‚  è¿½é—®    â”‚  - éªŒè¯æ–‡æ¡£è´¨é‡   â”‚                â”‚
â”‚  â”‚  - ç”Ÿæˆè¿½é—®é—®é¢˜    â”‚         â”‚  - æ£€æŸ¥æ¥å£ä¿æŠ¤   â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚           â”‚                             â”‚                           â”‚
â”‚           â”‚                             â”‚                           â”‚
â”‚           â–¼                             â–¼                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    plan.md / research.md                     â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â”‚  Review Comments èŠ‚ï¼š                                        â”‚   â”‚
â”‚  â”‚  - RC-1: [MAJOR] é—®é¢˜æè¿° â†’ Agent å›å¤ â†’ AI è¿½é—® â†’ ç”¨æˆ·ç¡®è®¤  â”‚   â”‚
â”‚  â”‚  - RC-2: [MINOR] å»ºè®®å†…å®¹ â†’ ...                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ä»£ç å®ç°è¯¦è§£

### 3.1 æ ¸å¿ƒæ•°æ®ç»“æ„

**æ–‡ä»¶ä½ç½®**: `.claude/hooks/lib/validator_subagent.py:13-20`

```python
@dataclass
class ValidationIssue:
    """éªŒè¯é—®é¢˜"""
    severity: str  # CRITICAL/MAJOR/MINOR
    category: str  # åˆ†ç±»
    message: str   # é—®é¢˜æè¿°
    suggestion: str  # ä¿®å¤å»ºè®®
    location: str  # ä½ç½®ï¼ˆæ–‡ä»¶:è¡Œå·ï¼‰
```

**ä¸¥é‡ç¨‹åº¦å®šä¹‰**ï¼š

| çº§åˆ« | å«ä¹‰ | é˜»å¡è¡Œä¸º | å›¾æ ‡ |
|------|------|---------|------|
| `CRITICAL` | ä¸¥é‡é—®é¢˜ï¼Œå¿…é¡»ä¿®å¤ | é˜»å¡æµç¨‹ï¼Œå¯èƒ½è§¦å‘ revert | ğŸ”´ |
| `MAJOR` | é‡è¦é—®é¢˜ï¼Œéœ€è¦ä¿®å¤ | é˜»å¡æµç¨‹ï¼Œå¯åå•†ä¼˜å…ˆçº§ | ğŸŸ  |
| `MINOR` | è½»å¾®é—®é¢˜ï¼Œå»ºè®®ä¿®å¤ | ä¸é˜»å¡ï¼Œè®°å½•å¾…åŠ | ğŸŸ¡ |

### 3.2 ä¸»ç±»ç»“æ„

**æ–‡ä»¶ä½ç½®**: `.claude/hooks/lib/validator_subagent.py:23-24`

```python
class ValidatorSubagent:
    """Validator Subagent - å®¡æŸ¥æ–‡æ¡£è´¨é‡"""

    def __init__(self, task_path: str):
        """
        åˆå§‹åŒ– Validator

        Args:
            task_path: ä»»åŠ¡è·¯å¾„
        """
        self.task_path = Path(task_path)
```

**è®¾è®¡è¯´æ˜**ï¼š
- ä½¿ç”¨ `Path` å¯¹è±¡å°è£…è·¯å¾„ï¼Œä¾¿äºè·¨å¹³å°æ“ä½œ
- ä»»åŠ¡è·¯å¾„æŒ‡å‘ `tasks/t1-YYYY-MM-DD-feature/` æ ¼å¼çš„ç›®å½•

### 3.3 research.md éªŒè¯æ–¹æ³•

**æ–‡ä»¶ä½ç½®**: `.claude/hooks/lib/validator_subagent.py:35-110`

```python
def validate_research(self) -> List[ValidationIssue]:
    """
    éªŒè¯ research.md

    Returns:
        é—®é¢˜åˆ—è¡¨
    """
    issues = []
    research_file = self.task_path / 'research.md'

    # 1. æ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥
    if not research_file.exists():
        issues.append(ValidationIssue(
            severity='CRITICAL',
            category='æ–‡ä»¶ç¼ºå¤±',
            message='research.md ä¸å­˜åœ¨',
            suggestion='åˆ›å»º research.md æ–‡ä»¶',
            location='research.md'
        ))
        return issues

    # 2. è¯»å–æ–‡ä»¶å†…å®¹
    with open(research_file, 'r', encoding='utf-8') as f:
        content = f.read()

    # 3. æ£€æŸ¥å¿…éœ€ç« èŠ‚
    required_sections = [
        ('éœ€æ±‚ç†è§£', 'research.md:éœ€æ±‚ç†è§£'),
        ('ä»£ç è°ƒç ”', 'research.md:ä»£ç è°ƒç ”'),
        ('Protected Interfaces', 'research.md:Protected Interfaces'),
        ('Why Questions', 'research.md:Why Questions')
    ]

    for section, location in required_sections:
        if section not in content:
            issues.append(ValidationIssue(
                severity='MAJOR',
                category='ç« èŠ‚ç¼ºå¤±',
                message=f'ç¼ºå°‘å¿…éœ€ç« èŠ‚: {section}',
                suggestion=f'æ·»åŠ  {section} ç« èŠ‚',
                location=location
            ))

    # ... æ›´å¤šæ£€æŸ¥é€»è¾‘
```

**éªŒè¯æµç¨‹å›¾**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    research.md éªŒè¯æµç¨‹                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  Step 1: æ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  research.md å­˜åœ¨ï¼Ÿ                                           â”‚   â”‚
â”‚  â”‚  - NO â†’ CRITICAL: "research.md ä¸å­˜åœ¨"                        â”‚   â”‚
â”‚  â”‚  - YES â†’ ç»§ç»­                                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                       â”‚
â”‚                              â–¼                                       â”‚
â”‚  Step 2: å¿…éœ€ç« èŠ‚æ£€æŸ¥                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ£€æŸ¥ç« èŠ‚:                                                    â”‚   â”‚
â”‚  â”‚  - éœ€æ±‚ç†è§£       â†’ ç¼ºå¤±åˆ™ MAJOR                              â”‚   â”‚
â”‚  â”‚  - ä»£ç è°ƒç ”       â†’ ç¼ºå¤±åˆ™ MAJOR                              â”‚   â”‚
â”‚  â”‚  - Protected Interfaces â†’ ç¼ºå¤±åˆ™ MAJOR                        â”‚   â”‚
â”‚  â”‚  - Why Questions  â†’ ç¼ºå¤±åˆ™ MAJOR                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                       â”‚
â”‚                              â–¼                                       â”‚
â”‚  Step 3: å†…å®¹è´¨é‡æ£€æŸ¥                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Why Questions ç« èŠ‚:                                          â”‚   â”‚
â”‚  â”‚  - åŒ…å« "ï¼ˆå¾…å¡«å……ï¼‰" â†’ MAJOR: "æœªå……åˆ†å›ç­”"                     â”‚   â”‚
â”‚  â”‚  - å†…å®¹ < 100 å­—ç¬¦ â†’ MAJOR: "å†…å®¹è¿‡çŸ­"                         â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  Protected Interfaces ç« èŠ‚:                                   â”‚   â”‚
â”‚  â”‚  - åŒ…å« "ï¼ˆå¾…å¡«å……ï¼‰" â†’ MINOR: "æœªæ˜ç¡®åˆ—å‡º"                     â”‚   â”‚
â”‚  â”‚  - å†…å®¹ < 50 å­—ç¬¦ â†’ MINOR: "å†…å®¹è¿‡çŸ­"                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                       â”‚
â”‚                              â–¼                                       â”‚
â”‚  Step 4: æ ¼å¼è§„èŒƒæ£€æŸ¥                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  YAML Frontmatter:                                            â”‚   â”‚
â”‚  â”‚  - ä¸ä»¥ "---" å¼€å¤´ â†’ MINOR: "ç¼ºå°‘ YAML Frontmatter"           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                       â”‚
â”‚                              â–¼                                       â”‚
â”‚                    è¿”å› issues åˆ—è¡¨                                  â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 plan.md éªŒè¯æ–¹æ³•

**æ–‡ä»¶ä½ç½®**: `.claude/hooks/lib/validator_subagent.py:112-203`

```python
def validate_plan(self) -> List[ValidationIssue]:
    """
    éªŒè¯ plan.md

    Returns:
        é—®é¢˜åˆ—è¡¨
    """
    issues = []
    plan_file = self.task_path / 'plan.md'

    # 1. æ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥
    if not plan_file.exists():
        issues.append(ValidationIssue(
            severity='CRITICAL',
            category='æ–‡ä»¶ç¼ºå¤±',
            message='plan.md ä¸å­˜åœ¨',
            suggestion='åˆ›å»º plan.md æ–‡ä»¶',
            location='plan.md'
        ))
        return issues

    with open(plan_file, 'r', encoding='utf-8') as f:
        content = f.read()

    # 2. æ£€æŸ¥å¿…éœ€ç« èŠ‚
    required_sections = [
        ('ç›®æ ‡', 'plan.md:ç›®æ ‡'),
        ('æ¶æ„è®¾è®¡', 'plan.md:æ¶æ„è®¾è®¡'),
        ('Phase Gates', 'plan.md:Phase Gates'),
        ('å®æ–½æ­¥éª¤', 'plan.md:å®æ–½æ­¥éª¤')
    ]

    # 3. æ£€æŸ¥ Phase Gates æ•°é‡
    if 'Phase Gates' in content:
        gates = re.findall(r'- \[[ x]\] (Gate \d+\.\d+:.*)', content)
        if len(gates) == 0:
            issues.append(ValidationIssue(
                severity='CRITICAL',
                category='å†…å®¹ç¼ºå¤±',
                message='æ²¡æœ‰å®šä¹‰ Phase Gates',
                suggestion='å®šä¹‰è‡³å°‘ 3 ä¸ª Phase Gates',
                location='plan.md:Phase Gates'
            ))
        elif len(gates) < 3:
            issues.append(ValidationIssue(
                severity='MINOR',
                category='å†…å®¹ä¸è¶³',
                message=f'Phase Gates æ•°é‡è¾ƒå°‘ï¼ˆ{len(gates)} ä¸ªï¼‰',
                suggestion='å»ºè®®å®šä¹‰è‡³å°‘ 3 ä¸ª Phase Gates',
                location='plan.md:Phase Gates'
            ))

    # 4. æ£€æŸ¥æœªå¤„ç†çš„ Review Comments
    critical_pending = re.findall(
        r'### RC-\d+:.*?CRITICAL.*?pending',
        content,
        re.DOTALL
    )
    major_pending = re.findall(
        r'### RC-\d+:.*?MAJOR.*?pending',
        content,
        re.DOTALL
    )

    if critical_pending:
        issues.append(ValidationIssue(
            severity='CRITICAL',
            category='Review Comments',
            message=f'æœ‰ {len(critical_pending)} ä¸ª CRITICAL Review Comments æœªå¤„ç†',
            suggestion='å¤„ç†æ‰€æœ‰ CRITICAL Review Comments',
            location='plan.md:Review Comments'
        ))

    return issues
```

**Phase Gates æ ¼å¼æ£€æµ‹**ï¼š

```python
# æ­£åˆ™è¡¨è¾¾å¼è§£æ Gate å®šä¹‰
gates = re.findall(r'- \[[ x]\] (Gate \d+\.\d+:.*)', content)

# åŒ¹é…ç¤ºä¾‹:
# - [ ] Gate 1.1: æ•°æ®åº“è¡¨è®¾è®¡
# - [x] Gate 1.2: API æ¥å£å®ç°
```

### 3.5 Protected Interfaces æ£€æŸ¥

**æ–‡ä»¶ä½ç½®**: `.claude/hooks/lib/validator_subagent.py:205-252`

```python
def validate_protected_interfaces(self, code_files: List[str]) -> List[ValidationIssue]:
    """
    æ£€æŸ¥æ˜¯å¦ä¿®æ”¹äº† Protected Interfaces

    Args:
        code_files: ä¿®æ”¹çš„ä»£ç æ–‡ä»¶åˆ—è¡¨

    Returns:
        é—®é¢˜åˆ—è¡¨
    """
    issues = []

    # 1. è¯»å– research.md ä¸­çš„ Protected Interfaces
    research_file = self.task_path / 'research.md'
    if not research_file.exists():
        return issues

    with open(research_file, 'r', encoding='utf-8') as f:
        content = f.read()

    # 2. æå– Protected Interfaces
    pi_section = self._extract_section(content, 'Protected Interfaces')
    if not pi_section:
        return issues

    # 3. ç®€å•æ£€æŸ¥ï¼šæŸ¥æ‰¾æ¥å£åç§°
    # æ³¨æ„ï¼šå®é™…å®ç°ä¸­åº”è¯¥ä½¿ç”¨ AST è§£æ
    protected_patterns = re.findall(r'`([^`]+)`', pi_section)

    # 4. æ£€æŸ¥ä»£ç æ–‡ä»¶
    for code_file in code_files:
        if not os.path.exists(code_file):
            continue

        with open(code_file, 'r', encoding='utf-8') as f:
            code_content = f.read()

        for pattern in protected_patterns:
            # æ£€æŸ¥æ˜¯å¦ä¿®æ”¹äº† protected interface
            if f'def {pattern}' in code_content or f'class {pattern}' in code_content:
                issues.append(ValidationIssue(
                    severity='CRITICAL',
                    category='Protected Interface',
                    message=f'å¯èƒ½ä¿®æ”¹äº† Protected Interface: {pattern}',
                    suggestion=f'ç¡®è®¤æ˜¯å¦çœŸçš„éœ€è¦ä¿®æ”¹ {pattern}ï¼Œå¦‚æœæ˜¯ï¼Œè¯·åœ¨ research.md ä¸­è¯´æ˜åŸå› ',
                    location=f'{code_file}:{pattern}'
                ))

    return issues
```

**å±€é™æ€§è¯´æ˜**ï¼š
å½“å‰å®ç°ä½¿ç”¨ç®€å•çš„å­—ç¬¦ä¸²åŒ¹é…ï¼Œæ¶æ„è®¾è®¡å»ºè®®ä½¿ç”¨ AST è§£æä»¥æé«˜å‡†ç¡®æ€§ã€‚

### 3.6 è¾…åŠ©æ–¹æ³•

**ç« èŠ‚æå–æ–¹æ³•** (`validator_subagent.py:288-306`)ï¼š

```python
def _extract_section(self, content: str, section_name: str) -> str:
    """
    æå–ç« èŠ‚å†…å®¹

    Args:
        content: æ–‡æ¡£å†…å®¹
        section_name: ç« èŠ‚åç§°

    Returns:
        ç« èŠ‚å†…å®¹
    """
    # æŸ¥æ‰¾ç« èŠ‚
    pattern = rf'##+ {re.escape(section_name)}\n\n(.*?)(?=\n##+ |\Z)'
    match = re.search(pattern, content, re.DOTALL)

    if match:
        return match.group(1).strip()

    return ''
```

**æ­£åˆ™è¡¨è¾¾å¼è§£æ**ï¼š
- `##+ ` - åŒ¹é…äºŒçº§åŠä»¥ä¸Šæ ‡é¢˜
- `{re.escape(section_name)}` - è½¬ä¹‰ç« èŠ‚åç§°ä¸­çš„ç‰¹æ®Šå­—ç¬¦
- `\n\n` - æ ‡é¢˜åçš„ç©ºè¡Œ
- `(.*?)` - éè´ªå©ªåŒ¹é…ç« èŠ‚å†…å®¹
- `(?=\n##+ |\Z)` - æ­£å‘é¢„æŸ¥ï¼ŒåŒ¹é…ä¸‹ä¸€ä¸ªæ ‡é¢˜æˆ–æ–‡æ¡£ç»“å°¾

---

## 4. è®¾è®¡ vs å®ç°å¯¹æ¯”

### 4.1 å®Œæˆåº¦åˆ†æ

| åŠŸèƒ½ç‚¹ | è®¾è®¡è¦æ±‚ | å®ç°çŠ¶æ€ | å®Œæˆåº¦ |
|--------|---------|---------|--------|
| research.md éªŒè¯ | æ£€æŸ¥å¿…éœ€ç« èŠ‚ã€å†…å®¹è´¨é‡ | âœ… å·²å®ç° | 90% |
| plan.md éªŒè¯ | æ£€æŸ¥ç›®æ ‡ã€æ¶æ„ã€Gates | âœ… å·²å®ç° | 85% |
| Protected Interfaces æ£€æŸ¥ | AST çº§åˆ«æ£€æŸ¥ | âš ï¸ ç®€å•å®ç° | 40% |
| Review Comments çŠ¶æ€æ£€æµ‹ | æ£€æµ‹æœªå¤„ç†æ‰¹æ³¨ | âœ… å·²å®ç° | 80% |
| YAML Frontmatter æ£€æŸ¥ | æ ¼å¼éªŒè¯ | âš ï¸ ä»…æ£€æŸ¥å¼€å¤´ | 30% |
| æœªæåŠä¸šåŠ¡çº¦æŸå‘ç° | æ™ºèƒ½æ£€æµ‹ | âŒ æœªå®ç° | 0% |
| é¢å¤–é—®é¢˜åˆ—è¡¨ç”Ÿæˆ | ç”Ÿæˆè¿½é—® | âŒ æœªå®ç° | 0% |
| Checklist ç”Ÿæˆ | ç”Ÿæˆå®¡æŸ¥æ¸…å• | âœ… å·²å®ç° | 100% |

### 4.2 å·®å¼‚åˆ†æ

**å·²å®ç°ä½†ä¸è®¾è®¡æœ‰å·®å¼‚çš„éƒ¨åˆ†**ï¼š

1. **Protected Interfaces æ£€æŸ¥**
   - **è®¾è®¡**: ä½¿ç”¨ AST è§£æï¼Œç²¾ç¡®æ£€æµ‹æ¥å£ç­¾åå˜æ›´
   - **å®ç°**: ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å‡½æ•°/ç±»å
   - **å½±å“**: å¯èƒ½äº§ç”Ÿè¯¯æŠ¥æˆ–æ¼æŠ¥

2. **YAML Frontmatter æ£€æŸ¥**
   - **è®¾è®¡**: éªŒè¯ task_id, status, version ç­‰å…ƒæ•°æ®
   - **å®ç°**: ä»…æ£€æŸ¥æ˜¯å¦ä»¥ `---` å¼€å¤´
   - **å½±å“**: æ— æ³•ç¡®ä¿å…ƒæ•°æ®å®Œæ•´æ€§

**æœªå®ç°çš„éƒ¨åˆ†**ï¼š

1. **æœªæåŠä¸šåŠ¡çº¦æŸå‘ç°**
   - éœ€è¦ AI è¾…åŠ©åˆ†æ
   - å¯èƒ½é›†æˆ Honest Questioning Engine

2. **é¢å¤–é—®é¢˜åˆ—è¡¨ç”Ÿæˆ**
   - éœ€è¦è¯­ä¹‰ç†è§£èƒ½åŠ›
   - å¯èƒ½éœ€è¦è°ƒç”¨å¤–éƒ¨ LLM

### 4.3 å®ç°è´¨é‡è¯„ä¼°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å®ç°å®Œæˆåº¦é›·è¾¾å›¾                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚                        research.md éªŒè¯                              â”‚
â”‚                             90%                                      â”‚
â”‚                              â”‚                                       â”‚
â”‚                              â”‚                                       â”‚
â”‚     Protected     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ plan.md éªŒè¯              â”‚
â”‚     Interfaces              â”‚               85%                     â”‚
â”‚       40%                   â”‚                                       â”‚
â”‚                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Review Comments           â”‚
â”‚                              â”‚              80%                     â”‚
â”‚     ä¸šåŠ¡çº¦æŸå‘ç°             â”‚                                       â”‚
â”‚       0%                    â”‚                                       â”‚
â”‚                        â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€ Checklist ç”Ÿæˆ                    â”‚
â”‚                             100%                                     â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. research.md éªŒè¯è§„åˆ™

### 5.1 å¿…éœ€ç« èŠ‚æ£€æŸ¥

æ ¹æ®æ¶æ„è®¾è®¡ï¼Œresearch.md å¿…é¡»åŒ…å«ä»¥ä¸‹ç« èŠ‚ï¼š

| ç« èŠ‚ | ä¸¥é‡ç¨‹åº¦ | æ£€æŸ¥é€»è¾‘ |
|------|---------|---------|
| **éœ€æ±‚ç†è§£** | MAJOR | å­—ç¬¦ä¸²å­˜åœ¨æ€§æ£€æŸ¥ |
| **ä»£ç è°ƒç ”** | MAJOR | å­—ç¬¦ä¸²å­˜åœ¨æ€§æ£€æŸ¥ |
| **Protected Interfaces** | MAJOR | å­—ç¬¦ä¸²å­˜åœ¨æ€§æ£€æŸ¥ |
| **Why Questions** | MAJOR | å­—ç¬¦ä¸²å­˜åœ¨æ€§æ£€æŸ¥ |

### 5.2 å†…å®¹è´¨é‡æ£€æŸ¥

**Why Questions ç« èŠ‚æ£€æŸ¥è§„åˆ™**ï¼š

```python
# æ£€æŸ¥ä»£ç ä½ç½®: validator_subagent.py:77-86

if 'Why Questions' in content:
    why_section = self._extract_section(content, 'Why Questions')
    if 'ï¼ˆå¾…å¡«å……ï¼‰' in why_section or len(why_section) < 100:
        issues.append(ValidationIssue(
            severity='MAJOR',
            category='å†…å®¹ä¸å®Œæ•´',
            message='Why Questions æœªå……åˆ†å›ç­”',
            suggestion='å›ç­”æ‰€æœ‰ Why é—®é¢˜ï¼Œæ¯ä¸ªé—®é¢˜è‡³å°‘ 2-3 å¥è¯',
            location='research.md:Why Questions'
        ))
```

**è´¨é‡åˆ¤æ–­æ ‡å‡†**ï¼š
- ä¸åº”åŒ…å«å ä½ç¬¦æ–‡æœ¬ `ï¼ˆå¾…å¡«å……ï¼‰`
- å†…å®¹é•¿åº¦åº” >= 100 å­—ç¬¦

### 5.3 Protected Interfaces ç« èŠ‚æ£€æŸ¥

```python
# æ£€æŸ¥ä»£ç ä½ç½®: validator_subagent.py:89-98

if 'Protected Interfaces' in content:
    pi_section = self._extract_section(content, 'Protected Interfaces')
    if 'ï¼ˆå¾…å¡«å……ï¼‰' in pi_section or len(pi_section) < 50:
        issues.append(ValidationIssue(
            severity='MINOR',
            category='å†…å®¹ä¸å®Œæ•´',
            message='Protected Interfaces æœªæ˜ç¡®åˆ—å‡º',
            suggestion='åˆ—å‡ºæ‰€æœ‰ä¸å¯ä¿®æ”¹çš„æ¥å£å’ŒåŸå› ',
            location='research.md:Protected Interfaces'
        ))
```

**æ³¨æ„**: æ­¤æ£€æŸ¥ä¸º MINOR çº§åˆ«ï¼Œä¸é˜»å¡æµç¨‹ã€‚

### 5.4 æ ¼å¼è§„èŒƒæ£€æŸ¥

**YAML Frontmatter æ£€æŸ¥**ï¼š

```python
# æ£€æŸ¥ä»£ç ä½ç½®: validator_subagent.py:101-108

if not content.startswith('---'):
    issues.append(ValidationIssue(
        severity='MINOR',
        category='æ ¼å¼é—®é¢˜',
        message='ç¼ºå°‘ YAML Frontmatter',
        suggestion='æ·»åŠ  YAML Frontmatterï¼ˆtask_id, created, statusï¼‰',
        location='research.md:1'
    ))
```

**æœŸæœ›çš„ Frontmatter æ ¼å¼**ï¼š

```yaml
---
task_id: t1
created: 2026-02-27
status: in_progress
version: 1.0
---

# research.md å†…å®¹...
```

---

## 6. plan.md éªŒè¯è§„åˆ™

### 6.1 å¿…éœ€ç« èŠ‚æ£€æŸ¥

| ç« èŠ‚ | ä¸¥é‡ç¨‹åº¦ | æ£€æŸ¥é€»è¾‘ |
|------|---------|---------|
| **ç›®æ ‡** | MAJOR | å­—ç¬¦ä¸²å­˜åœ¨æ€§æ£€æŸ¥ |
| **æ¶æ„è®¾è®¡** | MAJOR | å­—ç¬¦ä¸²å­˜åœ¨æ€§æ£€æŸ¥ |
| **Phase Gates** | MAJOR | å­—ç¬¦ä¸²å­˜åœ¨æ€§æ£€æŸ¥ |
| **å®æ–½æ­¥éª¤** | MAJOR | å­—ç¬¦ä¸²å­˜åœ¨æ€§æ£€æŸ¥ |

### 6.2 Phase Gates æ£€æŸ¥

**Gate æ•°é‡æ£€æµ‹**ï¼š

```python
# æ£€æŸ¥ä»£ç ä½ç½®: validator_subagent.py:154-171

if 'Phase Gates' in content:
    gates = re.findall(r'- \[[ x]\] (Gate \d+\.\d+:.*)', content)
    if len(gates) == 0:
        # CRITICAL: æ²¡æœ‰ Phase Gates
        issues.append(...)
    elif len(gates) < 3:
        # MINOR: Phase Gates æ•°é‡è¾ƒå°‘
        issues.append(...)
```

**Gate æ ¼å¼è§„èŒƒ**ï¼š

```markdown
### Phase Gates
- [ ] Gate 1.1: æ•°æ®åº“è¡¨è®¾è®¡
- [ ] Gate 1.2: API æ¥å£å®ç°
- [ ] Gate 1.3: æµ‹è¯•ç”¨ä¾‹ç¼–å†™
- [x] Gate 1.4: æ–‡æ¡£æ›´æ–°
```

**æ­£åˆ™è¡¨è¾¾å¼è§£æ**ï¼š
- `- \[[ x]\]` - åŒ¹é… `- [ ]` æˆ– `- [x]`
- `Gate \d+\.\d+:` - åŒ¹é… Gate ç¼–å· (å¦‚ Gate 1.1:)
- `(.*)` - æ•è· Gate æè¿°

### 6.3 Review Comments çŠ¶æ€æ£€æŸ¥

**æœªå¤„ç†æ‰¹æ³¨æ£€æµ‹**ï¼š

```python
# æ£€æŸ¥ä»£ç ä½ç½®: validator_subagent.py:174-201

# æ£€æµ‹æœªå¤„ç†çš„ CRITICAL Review Comments
critical_pending = re.findall(
    r'### RC-\d+:.*?CRITICAL.*?pending',
    content,
    re.DOTALL
)

# æ£€æµ‹æœªå¤„ç†çš„ MAJOR Review Comments
major_pending = re.findall(
    r'### RC-\d+:.*?MAJOR.*?pending',
    content,
    re.DOTALL
)
```

**Review Comments æ ¼å¼**ï¼š

```markdown
### RC-1: è¡¥å……è¾¹ç•Œæ¡ä»¶
> ä½ç½®: 47
> åˆ›å»ºæ—¶é—´: 2026-02-24 10:30
> ä¸¥é‡ç¨‹åº¦: [MAJOR]
> çŠ¶æ€: pending

#### æ ‡æ³¨å†å²
**[2026-02-24 10:30] ğŸ‘¤ @developer**
> éœ€è¦è¡¥å……ç½‘ç»œè¶…æ—¶çš„é‡è¯•é€»è¾‘
```

### 6.4 éªŒè¯æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    plan.md éªŒè¯æµç¨‹                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  Step 1: æ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  plan.md å­˜åœ¨ï¼Ÿ                                               â”‚   â”‚
â”‚  â”‚  - NO â†’ CRITICAL: "plan.md ä¸å­˜åœ¨"                            â”‚   â”‚
â”‚  â”‚  - YES â†’ ç»§ç»­                                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                       â”‚
â”‚                              â–¼                                       â”‚
â”‚  Step 2: å¿…éœ€ç« èŠ‚æ£€æŸ¥                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ£€æŸ¥ç« èŠ‚:                                                    â”‚   â”‚
â”‚  â”‚  - ç›®æ ‡        â†’ ç¼ºå¤±åˆ™ MAJOR                                 â”‚   â”‚
â”‚  â”‚  - æ¶æ„è®¾è®¡    â†’ ç¼ºå¤±åˆ™ MAJOR                                 â”‚   â”‚
â”‚  â”‚  - Phase Gates â†’ ç¼ºå¤±åˆ™ MAJOR                                 â”‚   â”‚
â”‚  â”‚  - å®æ–½æ­¥éª¤    â†’ ç¼ºå¤±åˆ™ MAJOR                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                       â”‚
â”‚                              â–¼                                       â”‚
â”‚  Step 3: Phase Gates è´¨é‡æ£€æŸ¥                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Gate æ•°é‡:                                                   â”‚   â”‚
â”‚  â”‚  - 0 ä¸ª â†’ CRITICAL: "æ²¡æœ‰å®šä¹‰ Phase Gates"                    â”‚   â”‚
â”‚  â”‚  - < 3 ä¸ª â†’ MINOR: "Phase Gates æ•°é‡è¾ƒå°‘"                     â”‚   â”‚
â”‚  â”‚  - >= 3 ä¸ª â†’ é€šè¿‡                                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                       â”‚
â”‚                              â–¼                                       â”‚
â”‚  Step 4: Review Comments çŠ¶æ€æ£€æŸ¥                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æœªå¤„ç†æ‰¹æ³¨:                                                  â”‚   â”‚
â”‚  â”‚  - CRITICAL pending â†’ CRITICAL: "æœªå¤„ç† CRITICAL RC"          â”‚   â”‚
â”‚  â”‚  - MAJOR pending â†’ MAJOR: "æœªå¤„ç† MAJOR RC"                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                       â”‚
â”‚                              â–¼                                       â”‚
â”‚                    è¿”å› issues åˆ—è¡¨                                  â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. è¯„åˆ†æœºåˆ¶

### 7.1 å½“å‰å®ç°

å½“å‰ä»£ç æ²¡æœ‰å®ç°æ˜¾å¼çš„è¯„åˆ†æœºåˆ¶ï¼Œä½†å¯ä»¥é€šè¿‡ `ValidationIssue` åˆ—è¡¨æ¨å¯¼è´¨é‡çŠ¶æ€ï¼š

```python
def run_validation(self) -> Dict[str, List[ValidationIssue]]:
    """
    è¿è¡Œå®Œæ•´éªŒè¯

    Returns:
        éªŒè¯ç»“æœ
    """
    return {
        'research': self.validate_research(),
        'plan': self.validate_plan()
    }
```

### 7.2 æ¶æ„è®¾è®¡ä¸­çš„è¯„åˆ†è¦æ±‚

æ ¹æ®æ¶æ„æ–‡æ¡£ (03_System_Architecture.md:3890-3893)ï¼š

> **è§¦å‘æ¡ä»¶**:
> - Validator Subagent æ‰“åˆ† < 70
> - äººç±»æ‰¹æ³¨"é‡æ¥"
> - Hooks è¿ç»­é˜»å¡ 3 æ¬¡

**å»ºè®®çš„è¯„åˆ†ç®—æ³•**ï¼š

```python
def calculate_score(self, issues: List[ValidationIssue]) -> int:
    """
    è®¡ç®—æ–‡æ¡£è´¨é‡åˆ†æ•° (0-100)

    Args:
        issues: éªŒè¯é—®é¢˜åˆ—è¡¨

    Returns:
        è´¨é‡åˆ†æ•°
    """
    score = 100

    for issue in issues:
        if issue.severity == 'CRITICAL':
            score -= 25
        elif issue.severity == 'MAJOR':
            score -= 10
        elif issue.severity == 'MINOR':
            score -= 3

    return max(0, score)
```

**è¯„åˆ†é˜ˆå€¼**ï¼š

| åˆ†æ•°èŒƒå›´ | çŠ¶æ€ | è¡Œä¸º |
|---------|------|------|
| 90-100 | ä¼˜ç§€ | ç›´æ¥é€šè¿‡ |
| 70-89 | åˆæ ¼ | å…è®¸ç»§ç»­ï¼Œè®°å½•é—®é¢˜ |
| 50-69 | è­¦å‘Š | æç¤ºäººç±»ç¡®è®¤ |
| 0-49 | å¤±è´¥ | é˜»å¡æˆ–è§¦å‘ revert |

### 7.3 è´¨é‡è¯„çº§

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è´¨é‡è¯„åˆ†ç­‰çº§                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  100 â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ä¼˜ç§€      â”‚
â”‚       â”‚                                                              â”‚
â”‚   90 â”€â”¤                                                              â”‚
â”‚       â”‚                                                              â”‚
â”‚   80 â”€â”¤                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚       â”‚                     â”‚   åˆæ ¼åŒºé—´      â”‚                      â”‚
â”‚   70 â”€â”¤                     â”‚   70-89 åˆ†      â”‚                      â”‚
â”‚       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚                      â”‚
â”‚   60 â”€â”¤                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚       â”‚                                                              â”‚
â”‚   50 â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ è­¦å‘Š           â”‚
â”‚       â”‚                                                              â”‚
â”‚   40 â”€â”¤                                                              â”‚
â”‚       â”‚                                                              â”‚
â”‚   30 â”€â”¤                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚       â”‚                     â”‚   å¤±è´¥åŒºé—´      â”‚                      â”‚
â”‚   20 â”€â”¤                     â”‚   0-49 åˆ†       â”‚                      â”‚
â”‚       â”‚                     â”‚                 â”‚                      â”‚
â”‚   10 â”€â”¤                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚       â”‚                                                              â”‚
â”‚    0 â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å¤±è´¥      â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. ä¸ Honest Questioning Engine çš„å…³ç³»

### 8.1 åä½œæ¨¡å¼

Validator Subagent å’Œ Honest Questioning Engine æ˜¯äº’è¡¥çš„éªŒè¯æœºåˆ¶ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åŒå¼•æ“éªŒè¯æ¨¡å¼                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚  â”‚   Honest Questioning Engine   â”‚                                  â”‚
â”‚  â”‚                               â”‚                                  â”‚
â”‚  â”‚  èŒè´£: æ£€æµ‹ Agent ç†è§£ç¨‹åº¦     â”‚                                  â”‚
â”‚  â”‚  è¾“å…¥: Agent å›å¤æ–‡æœ¬          â”‚                                  â”‚
â”‚  â”‚  è¾“å‡º: ç†è§£åº¦åˆ†æ•° + è¿½é—®é—®é¢˜   â”‚                                  â”‚
â”‚  â”‚                               â”‚                                  â”‚
â”‚  â”‚  æ£€æµ‹ç»´åº¦:                     â”‚                                  â”‚
â”‚  â”‚  - ä¸ç¡®å®šæ€§å…³é”®è¯              â”‚                                  â”‚
â”‚  â”‚  - æ¨¡ç³Šè¡¨è¾¾                   â”‚                                  â”‚
â”‚  â”‚  - åé—®æ•°é‡                   â”‚                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                  â”‚                                                   â”‚
â”‚                  â”‚ ç”Ÿæˆè¿½é—®                                          â”‚
â”‚                  â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚  â”‚     Validator Subagent        â”‚                                  â”‚
â”‚  â”‚                               â”‚                                  â”‚
â”‚  â”‚  èŒè´£: éªŒè¯æ–‡æ¡£è´¨é‡           â”‚                                  â”‚
â”‚  â”‚  è¾“å…¥: research.md / plan.md  â”‚                                  â”‚
â”‚  â”‚  è¾“å‡º: ValidationIssue åˆ—è¡¨   â”‚                                  â”‚
â”‚  â”‚                               â”‚                                  â”‚
â”‚  â”‚  æ£€æµ‹ç»´åº¦:                     â”‚                                  â”‚
â”‚  â”‚  - ç»“æ„å®Œæ•´æ€§                 â”‚                                  â”‚
â”‚  â”‚  - å†…å®¹è´¨é‡                   â”‚                                  â”‚
â”‚  â”‚  - æ¥å£ä¿æŠ¤                   â”‚                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                  â”‚                                                   â”‚
â”‚                  â”‚ å†™å…¥ Review Comments                              â”‚
â”‚                  â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚  â”‚   plan.md / research.md       â”‚                                  â”‚
â”‚  â”‚                               â”‚                                  â”‚
â”‚  â”‚  Review Comments èŠ‚:          â”‚                                  â”‚
â”‚  â”‚  - ç”¨æˆ·æ ‡æ³¨                   â”‚                                  â”‚
â”‚  â”‚  - Agent å›å¤                 â”‚                                  â”‚
â”‚  â”‚  - AI è¿½é—® (æ¥è‡ª HQE)         â”‚                                  â”‚
â”‚  â”‚  - éªŒè¯é—®é¢˜ (æ¥è‡ª Validator)  â”‚                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 åŠŸèƒ½å¯¹æ¯”

| ç»´åº¦ | Honest Questioning Engine | Validator Subagent |
|------|---------------------------|-------------------|
| **æ£€æµ‹å¯¹è±¡** | Agent å›å¤æ–‡æœ¬ | æ–‡æ¡£æ–‡ä»¶ |
| **æ£€æµ‹æ–¹å¼** | å…³é”®è¯/æ¨¡å¼åŒ¹é… | ç»“æ„åŒ–éªŒè¯ |
| **è¾“å‡ºç±»å‹** | ç†è§£åº¦åˆ†æ•° + è¿½é—® | ValidationIssue åˆ—è¡¨ |
| **è§¦å‘æ—¶æœº** | Agent å›å¤æ—¶ | æ–‡æ¡£ç”Ÿæˆå |
| **ä¸¥é‡ç¨‹åº¦** | ç†è§£åº¦ < 70 éœ€æ¾„æ¸… | CRITICAL/MAJOR/MINOR |

### 8.3 Honest Questioning Engine æ ¸å¿ƒé€»è¾‘

**æ–‡ä»¶ä½ç½®**: `.claude/hooks/lib/honest_questioning_engine.py:30-68`

```python
def detect_understanding(self, agent_response: str) -> Dict[str, any]:
    """
    æ£€æµ‹ Agent ç†è§£ç¨‹åº¦

    Returns:
        {
            'score': ç†è§£åº¦åˆ†æ•° (0-100),
            'uncertainty_count': ä¸ç¡®å®šæ€§å…³é”®è¯æ•°é‡,
            'vague_count': æ¨¡ç³Šè¡¨è¾¾æ•°é‡,
            'question_count': åé—®æ•°é‡,
            'needs_clarification': æ˜¯å¦éœ€è¦æ¾„æ¸…
        }
    """
    # æ£€æµ‹ä¸ç¡®å®šæ€§å…³é”®è¯
    uncertainty_count = sum(
        1 for keyword in self.uncertainty_keywords
        if keyword in agent_response.lower()
    )

    # æ£€æµ‹æ¨¡ç³Šè¡¨è¾¾
    vague_count = sum(
        1 for pattern in self.vague_patterns
        if re.search(pattern, agent_response)
    )

    # æ£€æµ‹é—®å·æ•°é‡ï¼ˆAgent åé—®ï¼‰
    question_count = agent_response.count('ï¼Ÿ') + agent_response.count('?')

    # è®¡ç®—ç†è§£åº¦åˆ†æ•° (0-100)
    understanding_score = 100
    understanding_score -= uncertainty_count * 10
    understanding_score -= vague_count * 15
    understanding_score -= question_count * 5
    understanding_score = max(0, min(100, understanding_score))

    return {
        'score': understanding_score,
        'uncertainty_count': uncertainty_count,
        'vague_count': vague_count,
        'question_count': question_count,
        'needs_clarification': understanding_score < 70
    }
```

### 8.4 é›†æˆå»ºè®®

**å½“å‰çŠ¶æ€**: ä¸¤ä¸ªæ¨¡å—ç‹¬ç«‹è¿è¡Œï¼Œæœªç›´æ¥é›†æˆ

**å»ºè®®é›†æˆæ–¹å¼**ï¼š

```python
# é›†æˆç¤ºä¾‹ä»£ç  (æœªå®ç°)

class IntegratedValidator:
    """é›†æˆéªŒè¯å™¨ - æ•´åˆ Validator + Honest Questioning"""

    def __init__(self, task_path: str):
        self.validator = ValidatorSubagent(task_path)
        self.questioning = HonestQuestioningEngine()

    def validate_with_understanding(
        self,
        research_content: str,
        agent_response: str
    ) -> Dict:
        """
        ç»¼åˆéªŒè¯: æ–‡æ¡£è´¨é‡ + Agent ç†è§£ç¨‹åº¦
        """
        # 1. æ–‡æ¡£ç»“æ„éªŒè¯
        doc_issues = self.validator.validate_research()

        # 2. Agent ç†è§£ç¨‹åº¦æ£€æµ‹
        understanding = self.questioning.detect_understanding(agent_response)

        # 3. å¦‚æœç†è§£åº¦ä½ï¼Œç”Ÿæˆè¿½é—®
        questions = []
        if understanding['needs_clarification']:
            questions = self.questioning.generate_questions(
                research_content,
                agent_response
            )

        return {
            'doc_issues': doc_issues,
            'understanding': understanding,
            'follow_up_questions': questions,
            'overall_score': self._calculate_overall_score(
                doc_issues,
                understanding['score']
            )
        }
```

---

## 9. Checklist ç”ŸæˆåŠŸèƒ½

### 9.1 generate_checklist æ–¹æ³•

**æ–‡ä»¶ä½ç½®**: `.claude/hooks/lib/validator_subagent.py:254-286`

```python
def generate_checklist(self) -> Dict[str, List[str]]:
    """
    ç”Ÿæˆå®¡æŸ¥ Checklist

    Returns:
        Checklist å­—å…¸
    """
    return {
        'Research å®¡æŸ¥': [
            'éœ€æ±‚ç†è§£æ˜¯å¦æ¸…æ™°ï¼Ÿ',
            'ä»£ç è°ƒç ”æ˜¯å¦å……åˆ†ï¼Ÿ',
            'Protected Interfaces æ˜¯å¦æ˜ç¡®ï¼Ÿ',
            'Why Questions æ˜¯å¦å›ç­”ï¼Ÿ',
            'æ˜¯å¦æœ‰é—æ¼çš„å…³é”®ä¿¡æ¯ï¼Ÿ'
        ],
        'Plan å®¡æŸ¥': [
            'ç›®æ ‡æ˜¯å¦æ˜ç¡®å¯éªŒè¯ï¼Ÿ',
            'æ¶æ„è®¾è®¡æ˜¯å¦åˆç†ï¼Ÿ',
            'Phase Gates æ˜¯å¦å®Œæ•´ï¼Ÿ',
            'å®æ–½æ­¥éª¤æ˜¯å¦è¯¦ç»†ï¼Ÿ',
            'é£é™©æ˜¯å¦è¯†åˆ«ï¼Ÿ'
        ],
        'Protected Interfaces': [
            'æ˜¯å¦åˆ—å‡ºæ‰€æœ‰ä¸å¯ä¿®æ”¹çš„æ¥å£ï¼Ÿ',
            'æ˜¯å¦è¯´æ˜äº†ä¸å¯ä¿®æ”¹çš„åŸå› ï¼Ÿ',
            'æ˜¯å¦æœ‰æ›¿ä»£æ–¹æ¡ˆï¼Ÿ'
        ],
        'Review Comments': [
            'æ‰€æœ‰ CRITICAL æ˜¯å¦ addressedï¼Ÿ',
            'æ‰€æœ‰ MAJOR æ˜¯å¦ addressedï¼Ÿ',
            'MINOR æ˜¯å¦åˆç†å¤„ç†ï¼Ÿ'
        ]
    }
```

### 9.2 ä¸æ¶æ„è®¾è®¡çš„å¯¹æ¯”

**æ¶æ„è®¾è®¡ä¸­çš„ Checklist** (03_System_Architecture.md:1874-1899)ï¼š

```markdown
# Validator Subagent å®¡æŸ¥æ¸…å•

## Research é˜¶æ®µå®¡æŸ¥
- [ ] éœ€æ±‚ç†è§£æ˜¯å¦å®Œæ•´ï¼Ÿ
- [ ] Protected Interfaces æ˜¯å¦å…¨éƒ¨è¯†åˆ«ï¼Ÿ
- [ ] å—å½±å“æ¨¡å—æ˜¯å¦é—æ¼ï¼Ÿ
- [ ] æ˜¯å¦å­˜åœ¨æœªæåŠçš„ä¸šåŠ¡çº¦æŸï¼Ÿ
- [ ] Open Questions æ˜¯å¦å……åˆ†ï¼Ÿ

## Plan é˜¶æ®µå®¡æŸ¥
- [ ] è®¾è®¡æ–¹æ¡ˆæ˜¯å¦ä¸ research.md ä¸€è‡´ï¼Ÿ
- [ ] æ˜¯å¦è¿å Protected Interfacesï¼Ÿ
- [ ] æ˜¯å¦å¼•å…¥å¾ªç¯ä¾èµ–ï¼Ÿ
- [ ] Phase Gates æ˜¯å¦å¯éªŒè¯ï¼Ÿ
- [ ] æµ‹è¯•ç­–ç•¥æ˜¯å¦å……åˆ†ï¼Ÿ
- [ ] Mermaid å›¾æ˜¯å¦å‡†ç¡®åæ˜ è®¾è®¡ï¼Ÿ

## Execute é˜¶æ®µå®¡æŸ¥
- [ ] ä»£ç æ˜¯å¦ä¸ plan.md ä¸€è‡´ï¼Ÿ
- [ ] æµ‹è¯•è¦†ç›–ç‡æ˜¯å¦è¾¾æ ‡ï¼Ÿ
- [ ] æ˜¯å¦æœ‰é—æ¼çš„è¾¹ç•Œæ¡ä»¶ï¼Ÿ
- [ ] æ˜¯å¦éœ€è¦ revertï¼Ÿ
```

**å·®å¼‚å¯¹æ¯”**ï¼š

| æ¶æ„è®¾è®¡ Checklist | ä»£ç å®ç° Checklist | å·®å¼‚ |
|-------------------|-------------------|------|
| å—å½±å“æ¨¡å—æ˜¯å¦é—æ¼ | ä»£ç è°ƒç ”æ˜¯å¦å……åˆ† | æªè¾ä¸åŒ |
| æœªæåŠä¸šåŠ¡çº¦æŸ | æ˜¯å¦æœ‰é—æ¼çš„å…³é”®ä¿¡æ¯ | èŒƒå›´ç¼©å° |
| Open Questions æ˜¯å¦å……åˆ† | Why Questions æ˜¯å¦å›ç­” | åç§°å·®å¼‚ |
| è®¾è®¡æ–¹æ¡ˆæ˜¯å¦ä¸ research.md ä¸€è‡´ | æ¶æ„è®¾è®¡æ˜¯å¦åˆç† | æ£€æŸ¥ç‚¹ä¸åŒ |
| æ˜¯å¦å¼•å…¥å¾ªç¯ä¾èµ– | - | æœªå®ç° |
| Mermaid å›¾æ˜¯å¦å‡†ç¡® | - | æœªå®ç° |
| Execute é˜¶æ®µå®¡æŸ¥ | - | æœªå®ç° |

---

## 10. æ€»ç»“

### 10.1 æ¨¡å—ä»·å€¼

Validator Subagent æ˜¯ nOmOsAi ç³»ç»Ÿè´¨é‡ä¿éšœçš„å…³é”®ç»„ä»¶ï¼š

1. **ç»“æ„åŒ–éªŒè¯** - ç¡®ä¿æ–‡æ¡£åŒ…å«å¿…éœ€ç« èŠ‚
2. **è´¨é‡æ£€æŸ¥** - æ£€æµ‹å†…å®¹å®Œæ•´æ€§å’Œè´¨é‡
3. **æ¥å£ä¿æŠ¤** - é˜²æ­¢æ„å¤–ä¿®æ”¹ Protected Interfaces
4. **çŠ¶æ€è¿½è¸ª** - æ£€æµ‹æœªå¤„ç†çš„ Review Comments

### 10.2 å¾…æ”¹è¿›é¡¹

| æ”¹è¿›é¡¹ | ä¼˜å…ˆçº§ | å»ºè®®æ–¹æ¡ˆ |
|--------|--------|---------|
| Protected Interfaces AST æ£€æŸ¥ | P0 | é›†æˆ Tree-sitter |
| è¯„åˆ†æœºåˆ¶å®ç° | P1 | æ·»åŠ  calculate_score æ–¹æ³• |
| ä¸ HQE é›†æˆ | P1 | åˆ›å»º IntegratedValidator |
| YAML Frontmatter å®Œæ•´éªŒè¯ | P2 | ä½¿ç”¨ yaml åº“è§£æ |
| Execute é˜¶æ®µæ£€æŸ¥ | P2 | æ‰©å±• validate_code æ–¹æ³• |
| Mermaid å›¾éªŒè¯ | P3 | è§£æ Mermaid è¯­æ³• |

### 10.3 ä½¿ç”¨ç¤ºä¾‹

```python
from validator_subagent import ValidatorSubagent

# åˆå§‹åŒ–
validator = ValidatorSubagent('tasks/t1-2026-02-27-feature')

# éªŒè¯ research.md
research_issues = validator.validate_research()

# éªŒè¯ plan.md
plan_issues = validator.validate_plan()

# æ£€æŸ¥ Protected Interfaces
protected_issues = validator.validate_protected_interfaces([
    'src/auth/login.py',
    'src/db/models.py'
])

# ç”Ÿæˆå®¡æŸ¥æ¸…å•
checklist = validator.generate_checklist()

# å®Œæ•´éªŒè¯
all_issues = validator.run_validation()

# è¾“å‡ºç»“æœ
for category, issues in all_issues.items():
    print(f"\n{category} éªŒè¯ç»“æœ:")
    for issue in issues:
        print(f"  [{issue.severity}] {issue.message}")
        print(f"    ä½ç½®: {issue.location}")
        print(f"    å»ºè®®: {issue.suggestion}")
```

---

## é™„å½•

### A. æ–‡ä»¶è·¯å¾„ç´¢å¼•

| æ–‡ä»¶ | è·¯å¾„ |
|------|------|
| Validator Subagent | `.claude/hooks/lib/validator_subagent.py` |
| Honest Questioning Engine | `.claude/hooks/lib/honest_questioning_engine.py` |
| ç³»ç»Ÿæ¶æ„æ–‡æ¡£ | `doc-arch/agent-nomos-flow/03_System_Architecture.md` |
| äº§å“éœ€æ±‚æ–‡æ¡£ | `doc-arch/agent-nomos-flow/02_PRD.md` |

### B. ç›¸å…³ PRD éœ€æ±‚

| éœ€æ±‚ ID | æè¿° | çŠ¶æ€ |
|---------|------|------|
| FR-010 | Validator Subagent åªè¯»å®¡æŸ¥ plan.md å¹¶å†™å› Review Comments | âœ… å·²å®ç° |
| FR-021 | è¯šå®è¿½é—®æœºåˆ¶ | âœ… å·²å®ç° HQE |
| FR-118 | Honest Questioning Engine | âœ… å·²å®ç° |

### C. æ¶æ„å¼•ç”¨

- æ¶æ„æ–‡æ¡£ 3.5 èŠ‚: Validator Subagent è®¾è®¡ (03_System_Architecture.md:876-889)
- æ¶æ„æ–‡æ¡£ 3.10.6 èŠ‚: æ ‡æ³¨å¾ªç¯å®Œæ•´æµç¨‹ (03_System_Architecture.md:2123-2160)
- PRD FR-010: Validator Subagent éœ€æ±‚å®šä¹‰ (02_PRD.md:229)
