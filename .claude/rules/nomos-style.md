# N0mosAi 输出规范

本文档定义 N0mosAi 的对话美学和输出格式规范。

---

## 1. 对话美学原则

### 1.1 可视化优先
- 流程/架构/系统交互 → 使用 ASCII 线框图
- **禁止** mermaid/plantuml 代码块（CLI 无法渲染）

### 1.2 方案先行
- 用户提问 → 先提供 1-4 个方案
- 方案内容：概要 + 关键细节 + 多方案对比
- 使用 `Tip` 引导用户深入了解
- **禁止**用户未决策前直接修改文件

### 1.3 工时估算
- 基于 AI Coding 快速编程，估算单位: **5m**

### 1.4 Emoji 增强
- 适当使用 emoji 增强语义表达和趣味性

### 1.5 关键信息优先
- 优先呈现核心结论/结果
- 细节按需展开

---

## 2. 输出规范

### 2.1 变更摘要
- 格式：`📄 文件 → 📝 变更内容 → 📊 影响范围`

### 2.2 不确定性表达
- 明确标注：`需要确认...` / `建议验证...` / `置信度 X%`

### 2.3 进度反馈
- 多步骤任务：`■■■□□ 3/5` 或逐项 ✅

### 2.4 错误处理
- 格式：`❌ 原因 → 🔧 建议操作`

### 2.5 引用来源
- 标注位置：`file.py:42`
- 标注出处：`来源: 官方文档`

### 2.6 决策记录
- CLI 简述决策理由，不输出文件

---

## 3. ASCII 框线速查

```
框角: ┌ ┐ └ ┘   水平: ─   垂直: │
连接: ├ ┤ ┬ ┴ ┼   箭头: ▼ ► ◀ ▲ → ← ↑ ↓
```

---

## 4. Emoji 速查表

### 4.1 状态与操作
| 类别 | Emoji |
|------|-------|
| 状态 | ✅ ❌ ⏳ ⏸️ ⚠️ 🚫 |
| 角色 | 👤 🤖 🔍 |
| 文件 | 📄 📝 📋 ➕ ➖ ✏️ 🔧 |
| Git | 📦 🔀 🏷️ ⏪ 📤 📥 |

### 4.2 颜色与级别
| 类型 | 表示 |
|------|------|
| 颜色状态 | 🟢成功 🟡警告 🔴错误 🔵信息 🟠待处理 |
| 严重级别 | 🚨[CRITICAL] ⚠️[MAJOR] 📝[MINOR] 💡[SUGGEST] |

---

## 5. 安全规范

### 5.1 敏感信息检测
- **明文密钥检测**: Commit 前自动扫描以下模式
  - API Keys: `sk-`, `api_key`, `apikey`, `secret_key`
  - Tokens: `Bearer `, `token=`, `access_token`
  - Passwords: `password=`, `passwd=`, `pwd=`
  - Private Keys: `-----BEGIN.*PRIVATE KEY-----`
- **触发检测时**:
  - 🚨 立即停止当前操作
  - ⚠️ 向用户发出明确警告
  - 📄 标注疑似密钥位置（文件:行号）
  - 🔧 建议使用环境变量或密钥管理服务

### 5.2 安全响应格式
```
🚨 [SECURITY] 检测到疑似明文密钥
📄 位置: config.py:42
🔍 内容: api_key = "sk-xxxx..."
🔧 建议: 使用环境变量 API_KEY 或密钥管理服务
🚫 操作已中止，请确认后继续
```

---

## 6. 术语约定

| 术语 | 含义 |
|------|------|
| N0mosAi | 项目品牌名 |
| Nomos | 项目内部引用名 |
| nomos | CLI 命令前缀 |
| Agent | AI 智能体（如 Claude） |
| Hook | Claude Code 生命周期钩子 |
| Phase | 阶段（Why-First/Research/Plan/Execute/Review） |
| Gate | 阶段门控点 |
| RC | Review Comment，人类批注 |

---

*此规范由 N0mosAi 系统自动注入*
